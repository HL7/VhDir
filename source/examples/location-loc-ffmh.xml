<Location xmlns="http://hl7.org/fhir">
	<id value="{f_id}"/>
	
	<meta>
		<profile value="http://hl7.org/fhir/uv/vhdir/StructureDefinition/vhdir-location"/>
	</meta>
	
	<extension url="http://hl7.org/fhir/uv/vhdir/StructureDefinition/accessibility">
		<!-- Indicates that this location is handicap accessible and can provide assistance to persons with disabilities -->
		<valueCodeableConcept>
			<coding>
				<system value="http://hl7.org/fhir/uv/vhdir/CodeSystem/codesystem-accessibility"/>
				<code value="handiaccess"/>
				<display value="handicap accessible"/>
			</coding>
			<text value="Offers a variety of services and programs for persons with disabilities"/>
		</valueCodeableConcept>
	</extension>
	
	<!-- eh: hold off on this for now
			
			E.g., This location uses the Revolutionary Professional EHR v10.4.3. The EHR product is certified to the 2014 Edition requirements. The product includes a patient portal.

	<extension url="http://hl7.org/fhir/uv/vhdir/StructureDefinition/ehr">
		<extension url="developer">
			<valueString value="Revolutionary Health"/>
		</extension>
		<extension url="product">
			<valueString value="Revolutionary Professional EHR"/>
		</extension>
		<extension url="version">
			<valueString value="10.4.3"/>
		</extension>
		<extension url="certificationEdition">
			<valueCoding>
				<system value="http://hl7.org/fhir/uv/vhdir/CodeSystem/codesystem-ehrcharacteristics"/>
				<code value="2014"/>
				<display value="ONC 2014 Certification"/>
			</valueCoding>
		</extension>
		<extension url="patientAccess">
			<valueCodeableConcept>
				<coding>
					<system value="http://hl7.org/fhir/uv/vhdir/CodeSystem/codesystem-ehrcharacteristics"/>
					<code value="portal"/>
					<display value="patient portal"/>
				</coding>
			</valueCodeableConcept>
		</extension>
		<extension url="certificationID">
			<valueString value="04282014-1111-2"/>
		</extension>
	</extension>
-->
<extension url="http://hl7.org/fhir/uv/vhdir/StructureDefinition/newpatients">
	<extension url="acceptingPatients">
		<valueBoolean value="true"/>
	</extension>
	<extension url="acceptingPatients">
		<valueReference>
				<!-- <reference value="Organization/vhdir-network-{npi}"/>  eh: todo -->
				<display value="Acme Insurance Co"/>
		</valueReference>
	</extension>	
	</extension>

<extension url="http://hl7.org/fhir/uv/vhdir/StructureDefinition/newpatients">
	<extension url="acceptingPatients">
		<valueBoolean value="true"/>
	</extension>
	<extension url="acceptingPatients">
		<valueReference>
				<!-- <reference value="Organization/vhdir-network-{npi}"/>  eh: todo -->
				<display value="Persona"/>
		</valueReference>
	</extension>	
	</extension>

<extension url="http://hl7.org/fhir/uv/vhdir/StructureDefinition/newpatients">
	<extension url="acceptingPatients">
		<valueBoolean value="true"/>
	</extension>
	<extension url="acceptingPatients">
		<valueReference>
				<!-- <reference value="Organization/vhdir-network-{npi}"/>  eh: todo -->
				<display value="Green Circle"/>
		</valueReference>	
	</extension>	
	</extension>

	<extension> url="http://hl7.org/fhir/uv/vhdir/StructureDefinition/newpatientprofile">
		<valueString value ="This location accepts all types of patients">
	</extension>

<!--  eh: todo 
	<extension> url="http://hl7.org/fhir/uv/vhdir/StructureDefinition/usage-restriction">
		<valueReference>
				<reference value="#vhdir-restriction-{npi}"/> 
				<display value="usage restriction"/>
		</valueReference>	
	</extension>
-->


	<identifier>
		<extension url="http://hl7.org/fhir/uv/vhdir/StructureDefinition/identifier-status">
			<valueCode value="active"/>
		</extension
		<use value="secondary"/>
		<system value="{location_identifier_system}"/>
		<value value="main campus"/> <!-- eh: randomize this too -->
		<assigner>
			<reference value="Organization/vhdir-org-{npi}"/>
			<display value="{name}"/>
		</assigner>
	</identifier>
	
	
	<status value="active"/> <!--eh: todo randomize this-->
	
	<name value="{name}"/>
	<description value="Main campus of {name}"/>
	
	<type>
		<!-- mapped from Taxonomy Code -->
		<coding>
			<system value="http://www.wpc.edi.com/taxonomy"/>
			<code value="{type_code}"/>
			<display value="{type_code_display}"/>
			<userSelected value="true"/>
		</coding>
	</type>
	
	
	<telecom>
		<extension url="http://hl7.org/fhir/uv/vhdir/StructureDefinition/contactpoint-availabletime">
			<extension url="allDay">
				<valueBoolean value="true"/>
			</extension>
		</extension>
		
		<system value="phone"/>
		<value value="{phone}"/>
		<use value="work"/>
		<rank value="1"/>
	</telecom>
	
	<address>
		<use value="work"/>
		<type value="both"/>
		<text value="{address}, {city}, {state} {zip}"/>
		<line value="{adress}"/>
		<city value="{city}"/>
		<state value="{state}"/>
		<postalCode value="{zip}"/>
		<country value="USA"/>
	</address>
	
	<!-- eh: hold off since not easy to discern this from NPPESS data,  e.g.,	a collection of buildings or other locations such as a site or a campus 
	<physicalType>
		<coding>
			<system value="http://terminology.hl7.org/CodeSystem/location-physical-type"/>
			<code value="si"/>
			<display value="Site"/>
			<userSelected value="true"/>
		</coding>
	</physicalType>
-->

	<position>
		<!-- Coordinates of this location -->
		<longitude value="{LON}"/>
		<latitude value="{LAT}"/>
	</position>
	
	<managingOrganization>  <!-- eh:  randomize whether belong to King Hospital System, Acme Healthcare or Blue Hope or none -->
		<!-- This location is managed by Founding Fathers Memorial Hospital -->
		<reference value="Organization/vhdir-organization-{managing_org_npi}"/>
		<display value="{managing_org}"/>
	</managingOrganization>
	
	
	<hoursOfOperation>
		<!-- This location is always open -->
		<daysOfWeek value="mon"/>
		<daysOfWeek value="tue"/>
		<daysOfWeek value="wed"/>
		<daysOfWeek value="thu"/>
		<daysOfWeek value="fri"/>
		<daysOfWeek value="sat"/>
		<daysOfWeek value="sun"/>
		<allDay value="true"/>
	</hoursOfOperation>
	<availabilityExceptions value="visiting hours from 6:00 am - 10:00 pm"/>
	
	
	<endpoint> <!-- A reference to an electronic endpoint -->
			<reference value="Endpoint/vhdir-{type}-{npi}-direct"/>
			<display value="{name} Direct address"/>
	</endpoint>
	
	
</Location>
